<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="favicon.ico">

    <title>HomePage Mind Dashboard</title>

    <!-- Bootstrap core CSS -->
    <link href="dist/css/bootstrap.min.css" rel="stylesheet">

    <link href="dist/css/main.css" rel="stylesheet">

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link href="assets/css/ie10-viewport-bug-workaround.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="./dashboard.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="assets/js/ie-emulation-modes-warning.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>

    <!-- FIXED TOP BAR -->

    <nav class="navbar navbar-inverse navbar-fixed-top" style="padding:5px">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <!-- add logo -->
          <a href="#" class="pull-left"><img src="https://www.mind.org.uk/images/mind-logo.png"></a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
            <li><a data-toggle = "collapse" data-parent = "#accordion" href = "#collapseOne">Advanced Search</a></li>
            <li><a href="#" style=>Help</a></li>
          </ul>
          <div class="input-group" style="float:right; width:20%; padding-top:7px; padding-right:2%">
            <input id="search-term" type="text" class="form-control" placeholder="Search keyword">
            <span class="input-group-btn">
              <button id="simple" class="btn" type="button">Submit</button>
            </span>
          </div>
          </div>
        </div>
      </div>
    </nav>

    <div style="clear:both;"></div>
    

    <!-- SECOND PANE FOR ADVANCED SEARCH, TIMESPAN AND DATA SOURCE -->
    <div id = "collapseOne" class = "panel-collapse collapse out">
         <div class = "panel-body navbarou">
      <div class="navbar-inner">
        <div class="row">
        <div class="col-sm-5"></div>
        <div class="col-sm-2">
        <ul class="nav">
        <li class="dropdown" style='padding-top: 15px'>
          <select id='source' class="selectpicker show-menu-arrow" data-style="btn-default" data-width="100%" size="4">
            <option value="" selected disabled>Data Source</option>
            <option value="gtrends">Google Trends</option>
            <option value="twitter">Twitter</option>
            <option value="instagram">Instagram</option>
          </select>
        </li>
        <li class="dropdown" style='padding-top: 10px'>
          <select id='timeframe' class="selectpicker show-menu-arrow" data-style="btn-default" data-width="100%" size="4">
            <option value="" selected disabled>Timespan</option>
            <option value="1h">1 hour</option>
            <option value="4h">4 hours</option>
            <option value="1d">1 day</option>
            <option value="1w">1 week</option>
            <option value="1m">1 month</option>
            <option value="3m">3 months</option>
            <option value="1y">1 year</option>
            <option value="at">All time</option>
          </select>
      </li>
    </ul>
    <div class="btn-group" style='padding: 10px'>
                <button id="advanced" class="btn" data-toggle = "collapse" data-parent = "#accordion" href = "#collapseOne">Submit</button>
            </div>
        </div>
  </div>     
      </div>
    </div>
      </div>

        <div class='container'>
        <div class="col-sm-12" style='padding:15px'>
          <h1 class="page-header">Mind Today</h1>

          <div class="row placeholders" style="height:100%">
            <div id='plotly'></div>
            <script>
              Plotly.d3.csv('https://raw.githubusercontent.com/plotly/datasets/master/wind_speed_laurel_nebraska.csv', function(rows){
                var trace = {
                  type: 'scatter',                    // set the chart type
                  mode: 'lines',                      // connect points with lines
                  x: rows.map(function(row){          // set the x-data
                    return row['Time'];
                  }),
                  y: rows.map(function(row){          // set the x-data
                    return row['10 Min Sampled Avg'];
                  }),
                  line: {                             // set the width of the line.
                    width: 1
                  },
                  error_y: {
                    array: rows.map(function(row){    // set the height of the error bars
                      return row['10 Min Std Dev'];
                    }),
                    thickness: 0.5,                   // set the thickness of the error bars
                    width: 0
                  }
                };

                var layout = {
                  yaxis: {title: "Wind Speed"},       // set the y axis title
                  xaxis: {
                    showgrid: false,                  // remove the x-axis grid lines
                    tickformat: "%B, %Y"              // customize the date format to "month, day"
                  },
                  margin: {                           // update the left, bottom, right, top margin
                    l: 40, b: 10, r: 10, t: 20
                  }
                };

                Plotly.plot(document.getElementById('wind-speed'), [trace], layout, {showLink: false});
            });
            </script>
            <!-- mind google trends graph goes here -->
            <iframe id='chart' width="100%" height="100%" src="" style="border: none; padding-left: 5%; padding-right:5%">
            </iframe>
            <div id='status' class="">
            </div>
            <script>
               $('.btn').click(function() {
                console.log('Submit button clicked');
                $('#chart').width($('body').width()*0.9);
                $('#chart').attr('height', $('body').width()*0.6);
                $('#status').fadeToggle();
                $('#status').removeClass('alert alert-success');
                $('#status').addClass('alert alert-warning').text("Loading chart...");
                process_form($(this).attr('id'));
              });
               $('#chart').bind("load", function () {
                  $('#status').removeClass('alert alert-warning');
                  $('#status').addClass('alert alert-success').text("Loaded!");
                  $('#status').fadeToggle(2000);
              });
            </script>
          </div>
          </div>
        <!-- LIST OF BUTTONS -->
        <div class='container'>
        <div class="col-sm-12">
          <!-- export pdf button -->
          <button type="button" class="btn-sample" onclick="alert('js method for pdf export here')">Export PDF</button>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
          <!-- share via email button -->
          <button type="button" class="btn-sample" onclick="alert('js method for email share here')">Share via Email</button>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
          <!-- Change date button  -->
          <button type="button" class="btn-sample" data-toggle = "collapse" data-parent = "#accordion" href = "#collapseOne">Search another date</button>
         
          </div>
</div>

          

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    
    <script src="dist/js/bootstrap.min.js"></script>
    <!-- Just to make our placeholder images work. Don't actually copy the next line! -->
    <script src="assets/js/vendor/holder.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="assets/js/ie10-viewport-bug-workaround.js"></script>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.8.1/css/bootstrap-select.min.css">

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.8.1/js/bootstrap-select.min.js"></script>
    <script src='./script.js'></script>

  </body>
</html>
